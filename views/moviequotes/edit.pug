include ../partials/header
include ../partials/menu

block content
    script.
        $(document).ready(function(){
            
            //- Populate year array with all years btw 1900 and current year
            var resultsArray = [];
            const min = 1930;
            const max = new Date().getFullYear();
            
            for(i = min; i <= max; i++) {
                resultsArray.push(i);
            }
            // Load year dropdown with year array
            $.each(resultsArray, function (i, item) {
                $('.dropmenu').append($('<option>', {
                    value: item,
                    text: item,
                    class: "item"
                }))
            });
            
            //- Set current value as year
            $('.dropmenu').dropdown('set selected', "#{moviequotes.year}");
            $('.dropmenu').dropdown();
   
            $('form').form({
            on: 'blur',
                fields: {
                    dropdown: {
                        identifier: 'dropdown',
                        rules: [{
                            type: 'empty',
                            prompt: 'Please select a year value'
                        }]
                    }
                }
            });
        });

    div(class="ui container movie-container")
        div(class="header") 
            a(href="/moviequotes" class="ui green left floated link") 
                i(class="hand point left outline large icon") 
                div(class="icon-next") Back 
            div(class="ui large header green right floated") Edit Movie Quote
        div(class="horizontal-line")

        form(class="ui form" action="/moviequotes/" + moviequotes.id + "?_method=PUT" method="POST")
            div(class="spacetop")
            div(class="two fields")
                div(class="field")
                    div(class="ui pointing below label") Edit the movie name *
                    input(type="text" name="moviename" required value=moviequotes.moviename) 
                div(class="field")
                    div(class="ui pointing below label") Edit the year movie was made *
                    select(class="ui selection dropdown dropmenu" name="movieyear") 
            div(class="field")
                div(class="ui pointing below label") Edit the movie quote *
                textarea(rows="2" name="moviequote" required) #{moviequotes.moviequote}
            div(class="field")
                div(class="ui pointing below label") Enter the screenwriters name (separate with comma if multiple) *
                input(type="text" name="screenwriter" required value=moviequotes.screenwriter) 
            input(class="ui green mini button right floated" type="submit")

include ../partials/footer